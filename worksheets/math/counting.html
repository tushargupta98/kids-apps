<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counting Matching Worksheet</title>
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B9D;
            --secondary: #C44569;
            --accent: #FFA502;
            --blue: #4A90E2;
            --green: #7ED321;
            --dark: #2C3E50;
            --bg: #FFF5F7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #FFE5EC 0%, #FFF9E6 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .controls {
            max-width: 900px;
            margin: 0 auto 30px;
            background: white;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            border: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
        }

        .controls::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 107, 157, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .controls > * {
            position: relative;
            z-index: 1;
        }

        .controls h1 {
            font-family: 'Bubblegum Sans', cursive;
            color: var(--primary);
            font-size: 3em;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 4px 4px 0 var(--accent), 8px 8px 0 rgba(0,0,0,0.1);
            letter-spacing: 2px;
        }

        .instructions {
            background: linear-gradient(135deg, var(--accent) 0%, #FFB84D 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid var(--secondary);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .instructions p {
            font-size: 1.3em;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .level-selector {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .level-btn {
            font-family: 'Comic Neue', cursive;
            padding: 12px 25px;
            font-size: 1.1em;
            border: 3px solid #333;
            background: white;
            color: #333;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 700;
        }

        .level-btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .level-btn.active {
            background: #333;
            color: white;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .refresh-btn, .print-btn {
            font-family: 'Bubblegum Sans', cursive;
            padding: 18px 45px;
            font-size: 1.4em;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .refresh-btn {
            background: linear-gradient(135deg, var(--green) 0%, #5FB300 100%);
            color: white;
            box-shadow: 0 8px 0 #5FB300, 0 10px 25px rgba(0,0,0,0.2);
        }

        .refresh-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 11px 0 #5FB300, 0 13px 30px rgba(0,0,0,0.3);
        }

        .refresh-btn:active {
            transform: translateY(5px);
            box-shadow: 0 3px 0 #5FB300, 0 5px 15px rgba(0,0,0,0.2);
        }

        .print-btn {
            background: linear-gradient(135deg, var(--blue) 0%, #357ABD 100%);
            color: white;
            box-shadow: 0 8px 0 #357ABD, 0 10px 25px rgba(0,0,0,0.2);
        }

        .print-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 11px 0 #357ABD, 0 13px 30px rgba(0,0,0,0.3);
        }

        .print-btn:active {
            transform: translateY(5px);
            box-shadow: 0 3px 0 #357ABD, 0 5px 15px rgba(0,0,0,0.2);
        }

        .worksheet {
            width: 8.5in;
            height: 11in;
            margin: 0 auto;
            background: white;
            padding: 0.6in;
            box-shadow: 0 15px 60px rgba(0,0,0,0.2);
            position: relative;
        }

        .worksheet-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #333;
        }

        .worksheet-header h2 {
            font-family: 'Bubblegum Sans', cursive;
            font-size: 2em;
            color: #333;
            margin-bottom: 10px;
        }

        .worksheet-info {
            font-size: 1.1em;
            color: #333;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            font-family: 'Comic Neue', cursive;
        }

        .matching-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 5px 0;
        }

        .objects-display {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            font-size: 1.8em;
            flex: 1;
            filter: grayscale(100%);
        }

        .answer-number {
            font-family: 'Comic Neue', cursive;
            font-size: 2em;
            color: #333;
            font-weight: 700;
            margin-left: auto;
            padding-left: 40px;
        }

        .answer-box {
            border: 2px solid #333;
            width: 60px;
            height: 60px;
            margin-left: auto;
            border-radius: 8px;
            background: white;
        }

        /* Print styles */
        @media print {
            @page {
                size: letter portrait;
                margin: 0;
            }

            body {
                background: white;
                padding: 0;
            }

            .controls {
                display: none;
            }

            .worksheet {
                width: 8.5in;
                height: 11in;
                margin: 0;
                box-shadow: none;
                page-break-after: always;
            }
        }

        @media screen and (max-width: 900px) {
            .worksheet {
                width: 100%;
                height: auto;
                padding: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="controls">
        <h1>üéØ Count & Match! üéØ</h1>
        
        <div class="level-selector">
            <button class="level-btn active" data-level="1">Level 1: Match (1-10)</button>
            <button class="level-btn" data-level="2">Level 2: Match (1-20)</button>
            <button class="level-btn" data-level="3">Level 3: Write (1-10)</button>
            <button class="level-btn" data-level="4">Level 4: Write (1-20)</button>
        </div>

        <div class="instructions">
            <p id="instructionText">üëÄ Count the objects on the left and draw a line to match with the correct number on the right! ‚úèÔ∏è</p>
        </div>

        <div class="action-buttons">
            <button class="refresh-btn" onclick="generateWorksheet()">üîÑ New Worksheet</button>
            <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print</button>
        </div>
    </div>

    <div class="worksheet">
        <div class="worksheet-header">
            <h2>Counting Matching Worksheet</h2>
            <div class="worksheet-info">
                <span>Name: _________________</span>
                <span>Date: _________________</span>
            </div>
        </div>

        <div id="matchingRows"></div>
    </div>

    <script>
        // 20 different child-friendly emojis (animals, toys, fruits, objects)
        const symbolSet = [
            'üê∂', 'üê±', 'üêª', 'üê∞', 'üê∏',
            'ü¶Ü', 'üê†', 'üêù', 'ü¶ã', 'üê¢',
            '‚≠ê', 'üéà', 'üéÅ', '‚öΩ', 'üöó',
            'üçé', 'üçå', 'üçì', 'üå∏', 'üåà'
        ];

        let currentLevel = 1;

        // Level selection
        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentLevel = parseInt(this.dataset.level);
                
                // Update instructions
                const instructionText = document.getElementById('instructionText');
                if (currentLevel === 1 || currentLevel === 2) {
                    instructionText.textContent = 'üëÄ Count the objects on the left and draw a line to match with the correct number on the right! ‚úèÔ∏è';
                } else {
                    instructionText.textContent = 'üëÄ Count the objects on the left and write the number in the box on the right! ‚úèÔ∏è';
                }
                
                generateWorksheet();
            });
        });

        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function generateWorksheet() {
            const container = document.getElementById('matchingRows');
            container.innerHTML = '';

            // Determine max count based on level
            const maxCount = (currentLevel === 1 || currentLevel === 3) ? 10 : 20;
            const showAnswerBox = (currentLevel === 3 || currentLevel === 4);

            // Create array of counts from 1 to 10 (we always show 10 questions)
            const counts = Array.from({length: 10}, (_, i) => i + 1);
            
            // If maxCount is 20, pick 10 random unique numbers from 1-20
            let selectedCounts;
            if (maxCount === 20) {
                const allCounts = Array.from({length: 20}, (_, i) => i + 1);
                selectedCounts = shuffle(allCounts).slice(0, 10);
            } else {
                selectedCounts = counts;
            }

            // Shuffle symbols and take first 10 (one per question)
            const selectedSymbols = shuffle(symbolSet).slice(0, 10);
            
            // Create questions pairing each unique symbol with each unique count
            const questions = selectedSymbols.map((symbol, index) => ({
                symbol: symbol,
                count: selectedCounts[index]
            }));

            // For levels 1 and 3, shuffle the question order so they're not incremental
            const displayQuestions = (currentLevel === 1 || currentLevel === 3) 
                ? shuffle(questions) 
                : questions;

            // For matching levels, shuffle the answer numbers
            // For write-in levels, we don't need to shuffle (there are no visible answers)
            const answersForMatching = showAnswerBox ? [] : shuffle(displayQuestions.map(q => q.count));

            // Generate rows
            displayQuestions.forEach((q, index) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'matching-row';
                
                const objectsDisplay = document.createElement('div');
                objectsDisplay.className = 'objects-display';
                
                // Create symbol objects
                for (let i = 0; i < q.count; i++) {
                    const symbolSpan = document.createElement('span');
                    symbolSpan.textContent = q.symbol;
                    objectsDisplay.appendChild(symbolSpan);
                }
                
                rowDiv.appendChild(objectsDisplay);
                
                // Add either answer number or answer box based on level
                if (showAnswerBox) {
                    const answerBox = document.createElement('div');
                    answerBox.className = 'answer-box';
                    rowDiv.appendChild(answerBox);
                } else {
                    const answerNumber = document.createElement('div');
                    answerNumber.className = 'answer-number';
                    answerNumber.textContent = answersForMatching[index];
                    rowDiv.appendChild(answerNumber);
                }
                
                container.appendChild(rowDiv);
            });
        }

        // Generate initial worksheet
        generateWorksheet();
    </script>
</body>
</html>
